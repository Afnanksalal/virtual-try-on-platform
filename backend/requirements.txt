# =============================================================================
# Leffa Virtual Try-On Platform - Requirements
# Python 3.10.x Compatible
# Based on: https://github.com/franciszzj/Leffa/blob/main/requirements.txt
# =============================================================================

# -----------------------------------------------------------------------------
# Core Web Framework (for our FastAPI backend)
# -----------------------------------------------------------------------------
fastapi
uvicorn[standard]
pydantic
python-multipart

# -----------------------------------------------------------------------------
# PyTorch Stack - Install FIRST with your CUDA version:
# For NVIDIA T4 GPU (CUDA 12.x):
#   pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
# Or for latest CUDA 12.x (recommended for T4):
#   pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
# See: https://pytorch.org/get-started/locally/
# -----------------------------------------------------------------------------
torch
torchvision
torchaudio

# -----------------------------------------------------------------------------
# Leffa Core Dependencies (from official Leffa requirements.txt)
# https://github.com/franciszzj/Leffa/blob/main/requirements.txt
# -----------------------------------------------------------------------------
accelerate
diffusers
transformers
safetensors
peft
tokenizers
huggingface_hub<1.0  # Pin for compatibility with transformers/tokenizers
triton

# -----------------------------------------------------------------------------
# Leffa Additional Dependencies
# -----------------------------------------------------------------------------
av
cloudpickle
einops
fvcore
imageio
matplotlib
numpy
omegaconf
onnxruntime-gpu  # Use GPU acceleration for ONNX on NVIDIA T4. If no GPU, use 'onnxruntime' instead.
opencv-python
pandas
pillow
pycocotools
pyyaml
psutil
regex==2024.5.15
scikit-image
scipy
timm
torchmetrics
tqdm

# -----------------------------------------------------------------------------
# InstantID / InsightFace (for identity-preserving generation)
# -----------------------------------------------------------------------------
insightface
onnx

# -----------------------------------------------------------------------------
# AI Services (Gemini)
# -----------------------------------------------------------------------------
google-generativeai

# -----------------------------------------------------------------------------
# Supabase Storage
# -----------------------------------------------------------------------------
supabase

# -----------------------------------------------------------------------------
# Utilities
# -----------------------------------------------------------------------------
python-dotenv
requests
httpx

# -----------------------------------------------------------------------------
# Compatibility Fixes
# -----------------------------------------------------------------------------
protobuf<4  # Required by open-clip-torch and compatible with HuggingFace stack
